(function(p,i,u){p(function(){F()});var a=localInfo.reqClientType;var e='<iframe name="left" id="rightMain" src="'+localHttps+"/portal/userCenter/uploadHeadPic_dialog.html"+localInfo.urlQurey+'" frameborder="false" scrolling="no" style="border:none;" width="486" height="485" allowtransparency="true"></iframe>';function r(){var r=p("<div>").Dialog({title:rss.uploadAvatar,titleUnderline:false,btnRight:false,btnLeft:false,html:e,beforeAction:function(){var e=this;p(document).on("click",".close",function(){e.hide()})}});ajaxHandler("isLogin",{},function(e){if(e.isSuccess==1){r.Dialog("show");p(".global_dialog_confirm_main").width(550);p(".global_dialog_confirm_nor").hide()}else{location.reload()}})}p(document).on("click","#uploadImg",function(){if(localInfo.siteID==currentSiteID){r()}}).on("click","#uploadImgDiv",function(){if(localInfo.siteID==currentSiteID){r()}});p(document).on("click","#nickNameLink",function(){var e='<div class="dinput-UI5 margin16" id="nicknameBox" style="margin-bottom:0"><input id="nicknametext" type="text"></div><p id="error_info" class="error-tips-EMUI5"></p>';e+="";var r={title:rss.nickname,btnRight:{text:rss.set,fn:function(){var e=this;if(!validator(p("#nicknametext"),true)){return false}var r={nickName:p("#nicknametext").val().trim()};x(r,function(){e.hide()})}},btnLeft:{text:rss.cancel_btn,fn:function(){}},html:e,beforeAction:function(){p.label.defaults.ifRight="10px";p.label(p("#nicknametext"),rss.notnull);var r=this;r.disabled();p("#nicknametext").val(localInfo.nickName);p("#nicknametext").bind("keyup change paste",function(){var e=this;setTimeout(function(){if(p("#nicknametext").val().trim()!=localInfo.nickName){r.enable()}else{r.disabled()}},0)})}};p("<div>").Dialog(r).Dialog("show");f()});p(document).on("click","#forumNickNameLink",function(){var e='<p style="margin-top:20px">'+rss.modifyUserInfo_forum_nickname_tips+'</p><div class="dinput-UI5" style="margin-bottom:0;margin-top:10px" id="forumnicknameBox"><input id="forumnicknametext" type="text"></div><p id="error_info" class="error-tips-EMUI5"></p>';e+="";var r={title:rss.forumnicknameTitle,btnRight:{text:rss.set,fn:function(){var e=this;if(!validator(p("#forumnicknametext"),true)){return false}var r={uniquelyNickname:p("#forumnicknametext").val().trim()};x(r,function(){e.hide()})}},btnLeft:{text:rss.cancel_btn,fn:function(){}},html:e,beforeAction:function(){p.label.defaults.ifRight="10px";p.label(p("#forumnicknametext"),rss.notnull);var r=this;r.disabled();p("#forumnicknametext").val(N(localInfo.forumNickName));p("#forumnicknametext").bind("keyup change paste",function(){var e=this;setTimeout(function(){if(p("#forumnicknametext").val().trim()!=localInfo.forumNickName){r.enable()}else{r.disabled()}},0)})}};p("<div>").Dialog(r).Dialog("show");l()});function n(){if(localInfo.loginID&&localInfo.loginID.startsWith("hw")){p("#loginIDLink").css("display","block")}else{p("#loginIDLink").css("display","none")}}p(document).on("click","#loginIDLink",function(){var e='<p class="line-EMUI5 font-13">'+rss_new.loginID_desc+"</p>"+'<div class="line8-EMUI5"></div>'+'<div class="dinput-UI5 input8 " id="inputdiv"><input id="loginIdText" type="text"></div>'+'<div class="errorDiv error-tips-EMUI5"></div>';var r={title:rss_new.loginID,btnRight:{text:rss.confirm_btn,fn:function(){var e=this;if(!validator(p("#loginIdText")[0],true)){return false}var r=p("#loginIdText").val();t(localInfo.loginID,r,function(){location.reload()})}},btnLeft:{text:rss.cancel_btn,fn:function(){}},html:e,beforeAction:function(){var e=this;e.disabled();p("#loginIdText").val(localInfo.loginID);p("#loginIdText").bind("textchange",function(){if(p("#loginIdText").val().trim()!=localInfo.loginID){e.enable()}else{e.disabled()}})},uc:true};p("<div>").Dialog(r).Dialog("show");c()});function t(e,r,n){var t={opType:6,newAccountType:0,newUserAccount:r,reqClientType:localInfo.reqClientType,lang:localInfo.lang};var i={70002002:rss_new.loginID_tip3,"default":rss_new.change_loginID_failed};casAjaxObj.setPhoneEmail(t,a,o,i);function a(){n()}function o(e,r){p("#inputdiv").addClass("input-error-EMUI5");var n=r.errorCode;if("70002002"==n){p(".errorDiv").text(rss_new.loginID_tip3)}else{p(".errorDiv").text(rss_new.change_loginID_failed)}}}p(document).on("click","#genderLink",function(){var e='<input type="hidden" id="sex" name="sex" value="0">';e+='<div  ><input type="hidden" value="" id="inputgender" class="edit_info"><div class="sex-line center"><span class="sex-name left">'+rss.gender_male+"</span>";e+='<span class="radioUnCheck  right" data-value="0" data-group="gender" data-check="true"></span></div>';e+='<div class="sex-line center"><span class="sex-name left">'+rss.gender_female+'</span><span class="radioUnCheck  right" data-value="1" data-group="gender" data-check="true"></span>';e+='</div><div class="sex-line center line-EMUI5"><span class="sex-name left">'+rss.gender_secret+'</span><span class="radioUnCheck  right" data-value="2" data-group="gender" data-check="true"></span></div></div>';var r={title:rss.sex,btnRight:{text:rss.confirm_btn,fn:function(){var e=this;var r={gender:p("#sex").val()};x(r,function(){e.hide()})}},btnLeft:{text:rss.cancel_btn,fn:function(){}},html:e,beforeAction:function(){var i=this;p("#sex").parents(".global_dialog_confirm_main").addClass("sex_dialog");p(".radioUnCheck").each(function(){var e=p(this);if(e.attr("data-value")==localInfo.gender){e.addClass("radioCheck").removeClass("radioUnCheck")}});p(".radioCheck,.radioUnCheck").bind("click",function(){var e=p(this);var r=p("#rbtnId");var n=e.attr("data-value");var t=e.attr("data-group");p("#input"+t).val(n);p(".radioCheck").removeClass("radioCheck").addClass("radioUnCheck");e.removeClass("radioUnCheck");e.addClass("radioCheck");p("#sex").val(n);if(n==localInfo.gender){i.disabled()}else{i.enable()}});i.disabled()},uc:true};p("<div>").Dialog(r).Dialog("show")});p(document).on("click","#cityLink",function(){var e='<div id="cityDiv">';e+='<div class="ddrop" id="provinceList"></div>';e+='<div class="ddrop" id="cityList"></div><div id="error_info" class="error-tips-EMUI5"></div>';e+="</div>";var r=[];var i=[];C(r);var n={title:rss.city,btnRight:{text:rss.confirm_btn,fn:function(){var e=this;if(!validator(p("#cityDiv"),true)){return false}var r={province:p("#provinceList input").val(),city:p("#cityList input").val()};var n=r.province+r.city;x(r,function(){e.hide()})}},btnLeft:{text:rss.cancel_btn,fn:function(){}},html:e,beforeAction:function(){var t=this;p("#provinceList").DropList({items:r,onChange:function(e,r,n){p("#provinceList input").val(n);i=[];T(e,i);p("#cityList").html("");p("#cityList").DropList({items:i,onChange:function(e,r,n){p("#cityList input").val(n)}});p("#cityList input").val(i[0].other);if(p("#provinceList input").val()!=localInfo.province||p("#cityList input").val()!=localInfo.city){t.enable()}else{t.disabled()}}}).DropList("select",D(localInfo.province)==""?2:D(localInfo.province));T(p("#provinceList input").val(),i);p("#provinceList input").val(areaJson.provinces[p("#provinceList input").val()].name);var e;if(localInfo.city==u||localInfo.city==""){e=i[0].other}else{e=localInfo.city}p("#cityList").DropList({items:i,onChange:function(e,r,n){p("#cityList input").val(n);if(p("#provinceList span").text()!=localInfo.province||p("#cityList span").text()!=localInfo.city){t.enable()}else{t.disabled()}}}).DropList("select",w(p("#provinceList input").val(),e));p("#cityList input").val(e);if(localInfo.province!=""){t.disabled()}}};p("<div>").Dialog(n).Dialog("show");m()});function o(){if(localInfo.needShowCompleteAge=="true"){p("#guideBg").html();var e='<b class="guide_btn_close"></b>';e+='<p class="guide_content">'+rss_new.uc_guide_content.format("18")+"</p>";e+='<div class="guide_line"></div>';e+='<p id="guideSetText" class="guide_set_text">'+rss_new.uc_guide_set_text+"</p>";e+='<div class="guide_triangle"></div>';p("#guideBg").html(e).show()}}p(document).on("click",".guide_btn_close",function(){p("#guideBg").hide()});p(document).on("click","#birthdayLink, #guideSetText",function(){var e='<div id="birthdayDiv">';e+='<div id="yearList"></div>';e+='<div id="monthList"></div>';e+='<div id="dayList"></div><div id="error_info" class="error-tips-EMUI5"></div>';e+="</div>";var r=new Date;var o=r.getFullYear();var n=1900;var s=[];for(var t=o;t>=n;t--){var i={value:t,label:t};s.push(i)}var l=[];for(var a=1;a<=12;a++){var c={value:a,label:a};l.push(c)}var f={title:rss.birthdayTitle,btnRight:{text:rss.confirm_btn,fn:function(){var e=this;if(!validator(p("#birthdayDiv"),true)){return false}var r=p("#yearList input").val();var n=p("#monthList input").val()<10?"0"+p("#monthList input").val():p("#monthList input").val();var t=p("#dayList input").val()<10?"0"+p("#dayList input").val():p("#dayList input").val();var i=(new Date).getFullYear();var a=localInfo.birthDate;var o=a.substring(0,4);var s=a.substring(4,6);var l=a.substring(6,8);var c=h(o,s,l);var f=g(o,s,l);var u=false;var d=true;if(localInfo.birthDate){d=false}if(c==false&&f==false&&a!=""){u=true}if(d){if(h(r,n,t)){A(null,p("#error_info"),rss.uc_infochangetochild_error);return}}else{if(c){if(!h(r,n,t)){A(null,p("#error_info"),rss.uc_infochangenochild_error);return}}if(u){if(h(r,n,t)){A(null,p("#error_info"),rss.uc_infochangetochild_error);return}if(g(r,n,t)){A(null,p("#error_info"),rss.uc_infochangetoadult_error);return}}if(f){if(!g(r,n,t)){A(null,p("#error_info"),rss.uc_infochangenoadult_error);return}}}var v=r+n+t;var m={birthDate:v};x(m,function(){e.hide()})}},btnLeft:{text:rss.cancel_btn,fn:function(){}},html:e,beforeAction:function(){var n=this;var e=localInfo.birthDate;var t=e.substring(0,4);var i=e.substring(4,6);var a=e.substring(6,8);p("#yearList").DropList({items:s,onChange:function(e,r){p("#yearList input").val(e);p("#monthList").DropList("select",1);d(p("#yearList input").val(),1);if(p("#yearList input").val()!=parseInt(t)||p("#monthList input").val()!=parseInt(i)||p("#dayList input").val()!=parseInt(a)){n.enable()}else{n.disabled()}p("#error_info").html("")}}).DropList("select",t==""||t==u?o:parseInt(t));p("#monthList").DropList({items:l,onChange:function(e,r){p("#monthList input").val(e);d(p("#yearList input").val(),p("#monthList input").val());if(p("#yearList input").val()!=parseInt(t)||p("#monthList input").val()!=parseInt(i)||p("#dayList input").val()!=parseInt(a)){n.enable()}else{n.disabled()}p("#error_info").html("")}}).DropList("select",i==""||i==u?1:parseInt(i));var r=v(p("#yearList input").val(),p("#monthList input").val());p("#dayList").DropList({items:r,onChange:function(e,r){p("#dayList input").val(e);if(p("#yearList input").val()!=parseInt(t)||p("#monthList input").val()!=parseInt(i)||p("#dayList input").val()!=parseInt(a)){n.enable()}else{n.disabled()}p("#error_info").html("")}}).DropList("select",a==""||a==u?1:parseInt(a));if(localInfo.birthDate!=""){n.disabled()}}};p("<div>").Dialog(f).Dialog("show")});function d(e,r){p("#dayList").html("");p("#dayList").DropList({items:v(p("#yearList input").val(),p("#monthList input").val()),onChange:function(e,r){p("#dayList input").val(e)}}).DropList("select",1)}function v(e,r){var n=31;var t=[];if(r==1||r==3||r==5||r==7||r==8||r==10||r==12){n=31}else if(r==2){if(s(e)){n=29}else{n=28}}else{n=30}for(var i=1;i<=n;i++){var a={value:i,label:i};t.push(a)}return t}function s(e){return 0==parseInt(e)%4&&(parseInt(e)%100!=0||parseInt(e)%400==0)}function l(){var e=p("#forumnicknametext");validator.bind(e,{type:["strLength","isNullstr","forumnicknameformat"],trim:true,validOnChange:true,min:0,max:20,msg_ct:"#error_info",errorFunction:function(e,r){if(r.type=="strLength"){A(p("#forumnicknameBox"),p("#error_info"),rss.forumNicknameLengthTip)}else if(r.type=="isNullstr"){A(p("#forumnicknameBox"),p("#error_info"),rss.error_70005003)}else if(r.type=="forumnicknameformat"){A(p("#forumnicknameBox"),p("#error_info"),rss.forumNicknameFormatTip)}},reInputFunction:function(e){B(p("#forumnicknameBox"),p("#error_info"))}});validator.register("isNullstr",function(e,r){if(p.trim(e).toLowerCase()=="null"){return false}var n=/^huafans.*$|^huafen.*$/;return!n.test(e)});validator.register("forumnicknameformat",function(e,r){if(p.trim(e)==""){return false}var n=/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/;return n.test(e)})}function c(){var e=p("#loginIdText");validator.bind(e[0],{type:["strLength","loginIdformat","startAlphabet","notStartHW"],trim:true,validOnChange:false,min:6,max:20,msg_ct:".errorDiv",errorFunction:function(e,r){p("#inputdiv").addClass("input-error-EMUI5");switch(r.type){case"strLength":p(".errorDiv").html(rss_new.loginID_tip1);break;case"loginIdformat":p(".errorDiv").html(rss_new.loginID_tip1);break;case"startAlphabet":p(".errorDiv").html(rss_new.loginID_tip2);break;case"notStartHW":p(".errorDiv").html(rss_new.loginID_tip4);break}},reInputFunction:function(){p(".errorDiv").html("");p("#inputdiv").removeClass("input-error-EMUI5")}});validator.register("loginIdformat",function(e,r){if(p.trim(e)==""){return false}var n=/^[a-zA-Z0-9_-]+$/;return n.test(e)});validator.register("startAlphabet",function(e,r){var n=/^[a-zA-Z]/;return n.test(e)});validator.register("notStartHW",function(e,r){var n=/^hw.*/i;return!n.test(e)})}function f(){var e=p("#nicknametext");validator.bind(e,{type:["strLength","isNullstr","nicknameformat"],trim:true,validOnChange:true,min:0,max:20,msg_ct:"#error_info",errorFunction:function(e,r){if(r.type=="strLength"){A(p("#nicknameBox"),p("#error_info"),rss.nicknameLengthTip)}else if(r.type=="isNullstr"){A(p("#nicknameBox"),p("#error_info"),rss.error_70005003)}else if(r.type=="nicknameformat"){A(p("#nicknameBox"),p("#error_info"),rss.nicknameFormatTip)}},reInputFunction:function(e){B(p("#nicknameBox"),p("#error_info"))}});validator.register("isNullstr",function(e,r){if(p.trim(e).toLowerCase()=="null"){return false}return true});validator.register("nicknameformat",function(e,r){if(p.trim(e)==""){return true}var n=/^([^\u0000-\u001f<>\,\;\/\%\&\'\"\(\)\[\]\{\}\\])+$/g;return n.test(e)})}function m(){var e=p("#provincetext");var r=p("#citytext");validator.bind(e,{type:["require"],trim:false,validOnChange:true,msg_ct:"#error_info_province",msg:{require:rss.provinceChoose}});validator.bind(r,{type:["require"],trim:false,validOnChange:true,msg_ct:"#error_info_city",msg:{require:rss.cityChoose}})}function g(e,r,n){var t=new Date(e,parseInt(r)-1,n);t.setFullYear(parseInt(e)+18);var i=t.getTime();var a=(new Date).getTime();return i<=a}function h(e,r,n){var t=new Date(e,parseInt(r)-1,n);t.setFullYear(parseInt(e)+localInfo.ageLimit*1);var i=t.getTime();var a=(new Date).getTime();return i>=a}function _(e,r,n){var t=new Date(e,parseInt(r)-1,n);t.setFullYear(parseInt(e)+13);var i=t.getTime();var a=(new Date).getTime();return i<=a}function I(e,r,n){var t=new Date(e,parseInt(r)-1,n);t.setFullYear(parseInt(e)+localInfo.ageLimit*1);var i=t.getTime();var a=(new Date).getTime();return i>=a}function b(){var e=p("#yeartext");var r=p("#monthtext");var n=p("#daytext");validator.bind(e,{type:["require"],trim:false,validOnChange:true,msg_ct:"#error_info_year",msg:{require:rss.yearInputTip}});validator.bind(r,{type:["require"],trim:false,validOnChange:true,msg_ct:"#error_info_month",msg:{require:rss.monthInputTip}});validator.bind(n,{type:["require"],trim:false,validOnChange:true,msg_ct:"#error_info_day",msg:{require:rss.dayInputTip}})}function y(e,r){if(r){e.removeClass("roff").addClass("ron")}else{e.removeClass("ron").addClass("roff")}e.data("check",r)}var k=function(e){if(e){var r=e.substring(0,4);var n=e.substring(4,6);var t=e.substring(6,8);var i=r+"-"+n+"-"+t;return i}return""};var L=function(e){if(e=="-1"){p("#gender").text(rss_new.uc_common_not_set)}else if(e=="0"){p("#gender").text(rss.gender_male)}else if(e=="1"){p("#gender").text(rss.gender_female)}else if(e=="2"){p("#gender").text(rss.gender_secret)}};var x=function(n,t){var e="updateUserInfo";var r={"userInfo":JSON.stringify(n),"reqClientType":a};ajaxHandler(e,r,function(e){var r=e.isSuccess;if(r=="1"){t();i.location.reload()}else{if(e.errorCode=="70005002"&&n.nickName!=u){A(p("#nicknameBox"),p("#error_info"),rss.error_70005002)}else if(e.errorCode=="10002074"&&n.uniquelyNickname!=u){A(p("#forumnicknameBox"),p("#error_info"),rss.forumNicknameFormatTip)}else if(e.errorCode=="70005002"&&n.uniquelyNickname!=u){A(p("#forumnicknameBox"),p("#error_info"),rss.error_70005002_2)}else if(e.errorCode=="70005005"){A(null,p("#error_info"),rss.error_70005005)}else if(e.errorCode=="70007005"){A(null,p("#error_info"),rss.error_10000604)}else if(e.errorCode=="10000606"){A(null,p("#error_info"),rss.uc_infochangenochild_error)}else if(e.errorCode=="10000607"){A(null,p("#error_info"),rss.uc_infochangetochild_error)}else if(e.errorCode=="10000608"){A(null,p("#error_info"),rss.uc_infochangetoadult_error)}else if(e.errorCode=="10000609"){A(null,p("#error_info"),rss.uc_infochangenoadult_error)}else if(e.errorCode=="10000001"){A(null,p("#error_info"),rss.error_10000001)}else if(e.errorCode=="70005003"){A(null,p("#error_info"),rss.error_70005003)}else if(e.errorCode=="70001201"){A(null,p("#error_info"),rss.error_70001201)}else if(e.errorCode=="10000604"){A(null,p("#error_info"),rss.error_10000604)}else{A(null,p("#error_info"),rss.failUpdateUserinfo)}}},function(e){p(".errorDiv").html(rss.failUpdateUserinfo)},true,"JSON")};function D(n){var e=areaJson.provinces;var t="";p.each(e,function(e,r){if(r.name==n){t=r.id}});return t}function C(i){var e=areaJson.provinces;p.each(e,function(e,r){var n=r.name;if(localInfo.lang!="zh-cn"){n=getPingyin(n)}var t={value:r.id,label:n,other:r.name};i.push(t)})}function w(e,r){var n=areaJson.provinces;var t;for(var i=0;i<n.length;i++){if(n[i].name==e){t=n[i];break}}var a=t.citys;var o;for(var s=0;s<a.length;s++){var l=a[s];for(var c in l){if(l[c]==r){o=c;return parseInt(o)}}}}function T(e,r){var n=areaJson.provinces;for(var t=0;t<n.length;t++){var i=n[t];if(i.id==e){var a=i.citys;for(var o=0;o<a.length;o++){var s=a[o];for(var l in s){var c=s[l];if(localInfo.lang!="zh-cn"){c=getPingyin(c)}var f={value:parseInt(l),label:c,other:s[l]};r.push(f)}}break}}}function U(e,r){var n=areaJson.provinces;var t="";for(var i=0;i<n.length;i++){var a=n[i];if(a.id==e){t=a.name;var o=a.citys;for(var s=0;s<o.length;s++){var l=o[s];for(var c in l){if(c==r){t+=l[c];return t}}}}}return t}function N(e){var r="";if(e.length==0)return"";r=e.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&nbsp;/g," ").replace(/&quot;/g,'"');return r}function q(e){var r="";if(e.length==0)return"";r=e.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/"/g,"&quot;");return r}i.displayGender=L;i.displayCity=U;i.formatDate=k;function A(e,r,n){e&&e.addClass("input-error-EMUI5");r.html(n)}function B(e,r){e.removeClass("input-error-EMUI5");r.html("")}function F(){p("#nickname").text(i.localInfo.nickName||rss_new.uc_common_not_set).html();p("#loginID").text(i.localInfo.loginID).html();p("#forumNickname").text(q(i.localInfo.forumNickName||rss_new.uc_common_not_set)).html();L(i.localInfo.gender||rss_new.uc_common_not_set);var e=i.localInfo.province+i.localInfo.city;if(localInfo.lang!="zh-cn"){e=getPingyin(e)}p("#cityarea").text(q(e)||rss_new.select_area).html();p("#birthday").html(i.localInfo.formatBirthDate||rss_new.uc_common_not_set);if(localInfo.hasNotifyCompleteAge!=="true"){o()}n()}})(jQuery,window);
ec.load("ajax");ec.pkg("ec.member.myCenter");ec.member.myCenter.load=function(){if(ec.account.isLogin()){isLogin=true;var a=parseInt($("#myGradeCode").val());if(ec.isIE6||ec.isIE7){}else{(function(){var d=parseInt($("#myGradeCode").val());var c=$("#nextNeedScores").val();var f=$("#minScores").val();var e=c-f;var b=$("#myUserScores").val();if(c==""){c=100000}ec.member.myCenter.updateProgress(c,f,b,d)})()}ec.member.myCenter.orderCount()}};ec.member.myCenter.perCenter=function(){ec.util.cookie.set("userCenterFlag",true);window.open(accountCenterUrl)};ec.member.myCenter.orderCount=function(){$.ajax({url:domainMain+"/member/orderCount.json?t="+new Date().getTime(),async:false,timeout:10000,success:function(c){c=JSON.parse(c);if(!c.success){return}var e=0;if(c.orderCount.unpaidOrderCount!=0||c.orderCount.partPaidOrderCount!=0){e+=parseInt(c.orderCount.unpaidOrderCount+c.orderCount.partPaidOrderCount);$("#un_payment").html("<em>"+e+"</em>")}if(c.orderCount.unpaidOrderCountWechat!=null&&c.orderCount.unpaidOrderCountWechat!=0){$("#un_payment_wechat").html("<em>"+parseInt(c.orderCount.unpaidOrderCountWechat)+"</em>")}var a=0;if(c.orderCount.unreceiptOrderCount!=0){a+=parseInt(c.orderCount.unreceiptOrderCount);$("#un_received").html("<em>"+a+"</em>")}if(c.orderCount.unreceiptOrderCountWechat!=null&&c.orderCount.unreceiptOrderCountWechat!=0){$("#un_received_wechat").html("<em>"+parseInt(c.orderCount.unreceiptOrderCountWechat)+"</em>")}var b=$("#un_payment_wechat em").text()?$("#un_payment_wechat em").text():0,d=$("#un_received_wechat em").text()?$("#un_received_wechat em").text():0;var f=parseInt(b)+parseInt(d);if(f==0){$("#li-order-small span").html("小程序订单")}else{$("#li-order-small span").html("小程序订单<em>("+f+")</em>")}ec.util.cookie.set("vmallOrderCountWechat",f)}});$.ajax({url:domainRms+"/comment/getNoCommentPrdCount.json?t="+new Date().getTime(),dataType:"jsonp",async:false,data:{tab:"nocomment",dateType:"1"},success:function(b){if(b.resultCode!=0){return}if(b.data.count!=0){$("#un_remark").html("<em>"+b.data.count+"</em>")}var e=$("#un_payment em").text()?$("#un_payment em").text():0,a=$("#un_received em").text()?$("#un_received em").text():0,d=$("#un_remark em").text()?$("#un_remark em").text():0;var c=parseInt(e)+parseInt(a)+parseInt(d);if(c==0){$("#li-order span").html("我的订单")}else{$("#li-order span").html("我的订单<em>("+c+")</em>")}ec.util.cookie.set("vmallOrderCount",c)}})};ec.member.myCenter.updateProgress=function(j,f,b,a){if(j>=0&&f>=0&&b>=0){var c=j,h=f,k=b,d=(k-h)/(c-h),e=0;if(parseInt(k)>=parseInt(c)){$(".canvas-left div").css({transform:"rotateZ(0deg)",background:"#F05C20"});$(".canvas-right div").css({transform:"rotateZ(-39deg)"})}else{if(d>0.5){e=280*d-320;$(".canvas-left div").css({transform:"rotateZ(0deg)"});$(".canvas-right div").css({transform:"rotateZ("+e+"deg)"});if(d>0.7){$(".canvas-left div").css({background:"#F05C20"})}else{e=e+180;$(".canvas-left div").css({transform:"rotateZ("+e+"deg)",background:"-webkit-gradient(linear, 0 bottom, right 0, from(#F05C20), to(#F58555))"});$(".canvas-right div").css({background:"-webkit-gradient(linear, 0 bottom, right 0, from(#F58555), to(#F05C20))"})}}else{if(d<0.01&&d>0){d=0.01}e=265*d-125;$(".canvas-left div").css({transform:"rotateZ("+e+"deg)",background:"-webkit-gradient(linear, 0 bottom, 0 0, from(#F05C20), to(#F58555))"});$(".canvas-right div").css({transform:"rotateZ(-180deg)"})}}}var g=document.getElementById("levelIcon");if(a!=null){switch(a){case 0:vipColor="#999";g.setAttribute("class","icon-vip-level-0");break;case 1:vipColor="#01abdf";g.setAttribute("class","icon-vip-level-1");break;case 2:vipColor="#24ca43";g.setAttribute("class","icon-vip-level-2");break;case 3:vipColor="#ffb710";g.setAttribute("class","icon-vip-level-3");break;case 4:vipColor="#fc5d21";g.setAttribute("class","icon-vip-level-4");break;case 5:vipColor="#fc3784";g.setAttribute("class","icon-vip-level-5");break;default:vipColor="#999";g.setAttribute("class","icon-vip-level-0");break}}};ec.ready(function(){ec.member.myCenter.load();$("#base_index").attr("class","mc-index");$("#pathPoint").empty()});
$(function(){var e=$("#formBean_username");var o=$("#btnSubmit");$.label(e,rss_new.login_js_hwaccount_id);var r={$account:e,showErrorFn:function(e){$("#username-input").addClass("input-error-EMUI5");showUsernameError(e)},successFn:function(){hideUsernameError()},reInputFn:function(){hideUsernameError();if($(".randomCodeDiv").hasClass("hide")){$(".randomCodeDiv").removeClass("hide");$("#formBean_username").val("");$("#formBean_username").siblings("label").show()}}};accountValidator(r);e.keyup(function(){validateInput()});o.bind("click",function(){if($("#btnSubmit").hasClass("disabled")){return false}if(!validator($("#formBean_username"),true)){return false}if(!$(".randomCodeDiv").hasClass("hide")&&localInfo.randomCode4ForgetPwd=="true"&&!ramdonCodeImgObj.isValidateRandomCodeSuccess()){return false}localInfo.popStep=1;localInfo.selectedObj="";checkForgotRisk()});if(localInfo.filledUserAccount&&localInfo.isBindingDevice=="true"){}else{if($(".randomCodeDiv").hasClass("hide")){$(".randomCodeDiv").removeClass("hide")}}validateInput();window.validateFormAllInput=validateInput});function checkForgotRisk(e,o){var r={reqClientType:localInfo.reqClientType,operType:o&&o.operType||"1",userAccount:convPlusOfPhoneAccount(e||$("#formBean_username").val().trim()),extInfo:localInfo.extInfo,session_code_key:localInfo.session_code_key,languageCode:lang,randomCode:localInfo.randomCode4ForgetPwd=="true"?ramdonCodeImgObj.getRandomCode():"",randomCodeDisplayType:localInfo.randomCodeDisplayType};if(r.operType===12){r.registerCountry=o.registerCountry}if(r.operType===13){r.registerCountry=o.registerCountry;r.anonymousLoginID=o.anonymousLoginID}if(r.userAccount){if(r.userAccount.indexOf("@")>=0){r.accountType="1"}else{r.accountType="2"}}r.fromSafeCheck=localInfo.fromSafeCheck;casAjaxObj.chkForgotRisk(r,chkForgotRiskSuccess,chkForgotRiskFail)}function chkForgotRiskSuccess(e){var o=[];if(e.existAccountFlag==1||e.existAccountFlag==2){o=e.siteInfoList}if(o.length==1){var r=e.crossSiteModel;if(r!=0){handleCrossSite(e)}else{gotoUrl(e.nextStepUrl+localInfo.resetPwdUrlQuery)}}else if(o.length>1){var n=$("#formBean_username");var s=convPlusOfPhoneAccount(n.val().trim()),a=localInfo.selectedObj||{},t=localInfo.popStep||1;popMultiAccount(s,e.siteInfoList,t,a,n,i,"stayInput");function i(e,o,r,n){localInfo.popStep=o;localInfo.selectedObj=n;checkForgotRisk(e,r)}}else{showUsernameError(rss_new.resetpwd_accountinfo_not_exist)}}function chkForgotRiskFail(e,o){var r=o.errorCode;if(r=="10000507"){handleCrossSite(o)}else if(r=="10000201"){if($(".randomCodeDiv").hasClass("hide")){$(".randomCodeDiv").removeClass("hide")}ramdonCodeImgObj.validateRandomCodeError()}else if(r=="70008800"){showSystemError(rss_new.error_risk_70008800,rss_new.uc_common_igetit);$("#randomCodeImg").click()}else if(r=="10000001"){showUsernameError(rss_new.uc_error_10000001_3)}else if(r=="10000004"){showUsernameError(rss_new.uc_error_10000004)}else if(r=="10000002"){showUsernameError(rss_new.uc_error_10000002)}else if(r=="10000003"){showUsernameError(rss_new.uc_error_10000003)}else if(r=="10001003"){showUsernameError(rss_new.uc_error_10001003_1)}else if(r=="10001004"){showUsernameError(rss_new.uc_error_10001003_2)}else if(r=="70001401"){showUsernameError(rss_new.uc_error_70001401)}else if(r=="10000600"){gotoUrl(localInfo.forgetbyidUrl+localInfo.resetPwdUrlQuery)}else if(r=="10001032"){showUsernameError(rss_new.forgotPwd_chkForgotRiskErr_10001032)}else{showUsernameError(rss_new.resetpwd_accountinfo_not_exist)}}function openCountryCodeDialog(e){var r='<div class="mask"></div>';r+='<div class="dialog">';r+='<div class="dcent">';$.each(e,function(e,o){r+='<div class="code-node line mkcl">';r+='<b data-value="false" class="ccr radio roff r"></b>';r+='<p class="item">';r+='<span class="split cc"></span><span class="split ua"></span>';r+="</p>";r+="</div>"});r+="</div>";r+="</div>";$("#selectCountryCodeDiv").html(r);var s=$("#formBean_username").val().trim();$.each(e,function(e,o){var r=o;var n="+"+r.countryCode;$("#selectCountryCodeDiv .dialog .ccr").eq(e).attr("data",r.siteID);$("#selectCountryCodeDiv .dialog .item").eq(e).find(".cc").text(n);$("#selectCountryCodeDiv .dialog .item").eq(e).find(".ua").text(s)});$(".radio").on("click",function(e){$(this).removeClass("roff");$(this).addClass("ron");var r=$(this);setTimeout(function(){var e=r.parent().find(".cc").text().trim().replace("+","00");var o=e+$("#formBean_username").val();$("#selectCountryCodeDiv").html("");$("#formBean_username").val(o);localInfo.siteID=r.attr("data");if(localInfo.currentSiteID!=localInfo.siteID){openGotoOwnSiteDialog()}else{if(localInfo.randomCode4ForgetPwd=="true"){ramdonCodeImgObj.resetRandomCode()}}},200)})}function openGotoOwnSiteDialog(){var e=rss_new.uc_common_noSupportService;$("<div>").Dialog({title:rss_new.uc_common_hint,btnLeft:false,btnRight:{text:rss_new.uc_common_igetit,fn:function(){this.hide();if(localInfo.randomCode4ForgetPwd=="true"){ramdonCodeImgObj.resetRandomCode()}}},html:e,beforeAction:function(){}}).Dialog("show")}function convPlusOfPhoneAccount(e){if(e){var o=e.replace(/^\s+|\s+$/g,"");var r=o.charAt(0);if(r=="+"){return"00"+o.substring(1)}return o}return e}function validateInput(){var e=$("#formBean_username").val();var o=false;if(e){e=e.trim()}if(typeof ramdonCodeImgObj!="undefined"){if(ramdonCodeImgObj.isValidateRandomCodeSuccess instanceof Function){o=ramdonCodeImgObj.isValidateRandomCodeSuccess()}}if(e&&e.length>=4){if($(".randomCodeDiv").hasClass("hide")||o||localInfo.randomCode4ForgetPwd!="true"){$("#btnSubmit").removeClass("disabled")}else if(!$(".randomCodeDiv").hasClass("hide")&&!o||!o){$("#btnSubmit").addClass("disabled")}}else{$("#btnSubmit").addClass("disabled")}}function showUsernameError(e){$("#error-tips").html(e);$("#error-tips").addClass("addbtmpad-msg-top8N-bottom8");$("#username-input").addClass("input-error-EMUI5");ramdonCodeImgObj.resetRandomCode()}function hideUsernameError(){$("#error-tips").html("");$("#error-tips").removeClass("addbtmpad-msg-top8N-bottom8");$("#username-input").removeClass("input-error-EMUI5")}function showRandomCodeError(e){$("#randomCode_msg").html(e);$("#randomCode_msg").addClass("addbtmpad-msg-top4-bottom10");$("#picAuthCode").addClass("input-error-EMUI5")}function hideRandomCodeError(){$("#randomCode_msg").html("");$("#randomCode_msg").removeClass("addbtmpad-msg-top4-bottom10");$("#picAuthCode").removeClass("input-error-EMUI5")}
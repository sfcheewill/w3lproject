function showBirthDayDropBox(){$("#birthDate").datePickEMUI5({yearChange:function(){$("#birthdayError").html("");$("#birthDateWrap").removeClass("input-error-EMUI5");if($("#birthDate").datePickEMUI5("M")){if($("#birthDate").datePickEMUI5("D")){checkBirthday()}}},monthChange:function(){$("#birthdayError").html("");$("#birthDateWrap").removeClass("input-error-EMUI5");if($("#birthDate").datePickEMUI5("Y")){if($("#birthDate").datePickEMUI5("D")){checkBirthday()}}},dayChange:function(){$("#birthdayError").html("");$("#birthDateWrap").removeClass("input-error-EMUI5");if($("#birthDate").datePickEMUI5("D")&&$("#birthDate").datePickEMUI5("M")&&$("#birthDate").datePickEMUI5("Y")){checkBirthday()}},format:"Y-M-D",yearSpace:false,yearSuffix:rss.year,monthSuffix:rss.month,daySuffix:rss.day})}function showBirthDateBox(){var e='<div class="input-container input-birthday" id="birthDateWrap">';e+='<div class="l input-left">'+rss_new.personal_info_birthday+"</div>";e+='<div class="input-content birthDateContent">';e+='<div id="birthDate" class="birthday-choose l"></div>';e+="</div>";e+="</div>";e+='<div id="birthdayError"></div>';$("#birthDateBox").html(e);showBirthDayDropBox()}function hideBirthDateBox(){$("#birthDateBox").html("")}function initInputContent(){var r=0;var a=0;if(!navigator.userAgent.match(/Chrome/)&&navigator.userAgent.match(/Safari/)&&localInfo.lang=="zh-cn"){$(".input-container .input-left").each(function(){if($(this).parent().attr("id")=="phoneInputDiv-box")return;var e=$(this).text();e=e.split("").join(" ");$(this).text(e)})}$(".input-container .input-left").each(function(){var e=$(this).width();var t=$(this).outerWidth();if(r<e){r=e}if(a<t){a=t}});var e=$(".input-container").outerWidth();var t=e-a;if(isRightLang(localInfo.lang)){$("#chooseCountry .input-content,.input-content.birthDateContent").css("margin-right",a+"px")}else{$("#chooseCountry .input-content,.input-content.birthDateContent").css("margin-left",a+"px")}$("#chooseCountry .dpmenu-EMUI5-down").css("width",t+"px");$("#chooseCountry .dpmenu-EMUI5-down").css("max-width",t-16+"px");if(!(localInfo.lang=="zh-cn"||localInfo.lang=="zh-tw"||localInfo.lang=="zh-hk"||localInfo.lang=="en-us")){$(".input-container .input-left").width(r+1)}}function getAdMarketAgreeStatus(e){localInfo.isSupportAdMarketAgr=false;if(e&&e.length>0){for(var t=0;t<e.length;t++){var r=e[t];if(r.agrID==10){localInfo.isSupportAdMarketAgr=true;localInfo.adMarketAgreeStatus=r.defaultAgreeOrNot}}}}function getEmailCode(){var e=$("#username").val();if(checkEmail(e)){$("#msg_phone").html("");$("#msg_phoneRandomCode").html("");$("#register_msg").html("");var t=$("#username");checkExistAuto(t,function(){var e=$("#username").val().trim();sendEmailCode(e)})}}function checkEmail(e){if(e==""){showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss.js_emptyemail);return false}else if(e.length<5||e.length>50){showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss.login_js_accountlength);return false}else{if(!/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9\-]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(e)){showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss.js_emailfomaterror);return false}return true}}function getAgreementContent(e){var t=[];var r={"reqClientType":localInfo.reqClientType,"lang":localInfo.lang,"countryCode":e,"operType":0};var a="getAgreementContent";ajaxHandler(a,r,function(e){if(e.isSuccess=="1"){localInfo.agreementContentsStr=e.agreeForReg;localInfo.agreementContents=e.agreementContents;localInfo.ageLimit=e.ageLimit;localInfo.isRegNeedInputAge=e.isRegNeedInputAge;getAdMarketAgreeStatus(localInfo.agreementContents);if(localInfo.isRegNeedInputAge=="true"){showBirthDateBox();initInputContent()}else{hideBirthDateBox()}regFootLinkUpdate(e.countrySiteID,e.countrySpecial,e.privacyPolicyUrl,e.huaweiIDAgrUrl)}},function(){},true,"JSON")}function showErrorNew(e,t,r){if(e){e.addClass("input-error-EMUI5");t.html(r).addClass("error-tips-EMUI5")}else{t.html(r).addClass("errorColor")}}function hideErrorNew(e,t){e.removeClass("input-error-EMUI5");t.html("").removeClass("error-tips-EMUI5")}function showPopError(e){showSystemError(e,rss.iKnowBtn)}function replaceAgreeAge(e){if(e>0){$("#clickAgree").text(rss.common_agree_two_age.format(e))}else{$("#clickAgree").text(rss.common_agree_two)}}function listToDropListCountry(e){var a=[];if(e){$.each(e,function(e,t){var r={value:t.siteID+"-"+t.regionID,label:t.mulitLangRegion};a.push(r)})}return a}function getIPCountry(){var t="";var e={"reqClientType":localInfo.reqClientType};var r="getIPCountry";ajaxHandler(r,e,function(e){if(e.isSuccess=="1"){if(e.countryCode!=""){t=localInfo.currentSiteID+"-"+e.countryCode}}},function(){},false,"JSON");return t}function displayAgreeTwoByCD(r){if(countryRegions.length>0){$.each(countryRegions,function(e,t){if(r.toLowerCase()==t.regionID){replaceAgreeAge(t.ageLimit)}})}}function showDaydd(e){e=Number(e);$("#day").val(e);$("#dateDiv").empty();var t=getDaysInMonth($("#year").val(),$("#month").val());var r=[];r[0]={value:"N",label:rss.day};for(var a=t,n=1;a>=1;a--,n++){var i={value:a,label:a};r[n]=i}$("#dateDiv").DropListEMUI5({items:r,defaultValue:e,onChange:function(e,t){$("#day").val(e)}})}function listToDropList(e){var o=[];if(e){var t=e.split(",");$.each(t,function(e,t){var r=t.split("-");var a=r[0];var n=r[1];if(a.indexOf(" ")>-1){a=a.replace(" ","")}if(a.indexOf("[")>-1){a=a.replace("[","")}if(n.indexOf("]")>-1){n=n.replace("]","")}if(n.indexOf("year")>-1){n=n.replace("year",rss.year)}if(n.indexOf("month")>-1){n=n.replace("month",rss.month)}var i={value:a,label:n};o.push(i)})}return o}function changeCountryLocation(e){var t=/countryCode=([a-zA-Z]{2})/.exec(window.location.href)[1];var r="",a="";if(e.length>0){for(var n=0;n<e.length;n++){if(e[n].regionID==t){r=e[n].mulitLangRegion;a=e[n].siteID;break}}}$("#selectedCountry").text(r);$("#countryRegion").val(a+"-"+t)}function chgRandomCodeForReset(){var e=$("#randomCode");var t=$("#randomCodeImg");chgRandomCode(t[0],localInfo.webssoLoginSessionCode);e.val("");$("#authCodeRight").removeClass("poptips-yes")}function validateInput(){var e=$("#randomCode").val().trim();if(e&&e.length>=4&&$("#authCodeRight").hasClass("poptips-yes")){$("#authCodeRight").attr("datavalue","true")}else{$("#authCodeRight").attr("datavalue","false")}}function over13GONormal(){var e="<div>"+rss.uc_ageoverLimit_gonormal.format(localInfo.ageLimit)+"</div>";$("<div>").Dialog({title:rss.hint,btnLeft:false,btnRight:{text:rss.iKnowBtn,fn:function(){this.hide()}},html:e,beforeAction:function(){}}).Dialog("show")}function under13GOChild(){var e="<div>"+rss_new.uc_cantcreateunder_agelimit_content.format(localInfo.ageLimit)+"</div>";$("<div>").Dialog({title:rss_new.uc_cantcreateunder13_title,btnLeft:false,btnRight:{text:rss.iKnowBtn,fn:function(){this.hide()}},html:e,beforeAction:function(){}}).Dialog("show");$("#websettingurl").attr("href",localInfo.createChildUrl)}function jsGetAge(e){var t=e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(t==null){return-2}var r;var a=e.split("-");var n=a[0];var i=a[1];var o=a[2];if(n==""||i==""||o==""){return-2}d=new Date;var s=d.getFullYear();var l=d.getMonth()+1;var c=d.getDate();if(s==n){if(l<i){r=-1}if(l==i&&c<o){r=-1}if(l==i&&c>=o){r=0}if(l>i){r=0}}else{var u=s-n;if(u>0){if(l==i){var f=c-o;if(f<0){r=u-1}else{r=u}}else{var h=l-i;if(h<0){r=u-1}else{r=u}}}else{r=-1}}return r}function checkBirthday(e){var t=$("#birthDate").datePickEMUI5("Y")+"-"+$("#birthDate").datePickEMUI5("M")+"-"+$("#birthDate").datePickEMUI5("D");var r=jsGetAge(t);if(r==-2){showErrorNew($("#birthDateWrap"),$("#birthdayError"),rss.chooseDateTip);return false}if(r==-1){showErrorNew($("#birthDateWrap"),$("#birthdayError"),rss.birthdayLimitTip);return false}if(r<localInfo.ageLimit&&!e){under13GOChild();return false}else if(r>=localInfo.ageLimit&&e){over13GONormal();return false}else if(r<0){showErrorNew(null,$("#birthdayError"),rss.age_error);return false}return true}function getGuardianAccount(){return localInfo.userAccount}function isPastToday(e){var t=e.substring(0,4);var r=e.substring(4,6);var a=e.substring(6,8);var n=new Date(t,parseInt(r)-1,a);n.setFullYear(parseInt(t)+0);var i=n.getTime();var o=(new Date).getTime();return i>=o}function updateUserAgrsForParent(e,r){var t=JSON.parse(e);var a=[];for(var n=0;n<t.length;n++){a.push(t[n])}var i={reqClientType:localInfo.reqClientType,agrIDs:JSON.stringify(a)};ajaxHandler("updateUserAgrs",i,function(e){var t=e.isSuccess;if(t=="1"){if(r){r()}}else{if(e.errorCode=="10000001"){showErrorNew(null,$("#register_msg"),rss.error_10000001)}else{showErrorNew(null,$("#register_msg"),rss.common_error)}}},function(){},false,"json")}
var isCurrentSite=false;var warningConfirmed=false;var countryRegions=[];var showCountryRegions=[];$(document).ready(function(){initInputContent();(function(){var e=$("#tabPhone").width();var o=$("#tabMail").width();var r=e>o?e:o;$("#tabPhone").width(r+2+"px");$("#tabMail").width(r+2+"px");$(".reg-tab").css("visibility","visible");if(localInfo.urlCountrySiteID==localInfo.currentSiteID){isCurrentSite=true}})();(function(){var e=$("#username");var o=e.val();e.blur(function(){$(".seachDiv").css("display","none");if(this.value.length>0&&o!=e.val()&&valiEmail(this.value)){o=e.val();checkExistAuto(e)}})})();(function(){var t=$("#username");var i=$(".seachDiv");var e=$(".seachDiv ul li");var d=-1;t.keyup(function(){if(this.value.length>0&&this.value.indexOf("@")>-1){var n=this.value.split("@")[1];var a=0;e.each(function(e){this.id="searchLi_"+e;var o=$("#"+this.id);var r=o.attr("text");if(r.indexOf(n)==-1){this.style.display="none";$(this).removeClass("showLi")}else{a=a+1;this.style.display="";$(this).addClass("showLi")}r=r.replace(n,"");var s=t.val()+r;this.innerHTML=s;o.mousedown(function(){var e=t.val().split("@")[0];t.val(e+"@"+o.attr("text"));i.css("display","none")})});if(a>0){i.css("display","block");$(this).addClass("showLi")}}});$("#username").bind("keydown",function(e){var o=$(".seachDiv ul li.showLi");var r=$("#username");var s=$(".seachDiv");var n=$(".seachDiv ul li.current");o.each(function(e){$(o[e]).css("background","#fff");$(o[e]).removeClass("current")});switch(e.which){case 38:d--;l(o);break;case 40:d++;l(o);break;case 13:if(typeof n.get(0)!="undefined"&&(n.get(0).tagName=="LI"||n.get(0).tagName=="li")){var a=r.val().split("@")[0];r.val(a+"@"+n.attr("text"));s.css("display","none");r.blur()}else{$("#btnSubmit").click()}break;default:return}});var l=function(e){if(d<0)d=0;if(d>=e.length)d=e.length-1;$(e[d]).css("background","RGB(173,173,173)");$(e[d]).addClass("current")}})();$("#passwdEye").click(function(){var e=document.getElementById("password").type;if(e=="password"){document.getElementById("password").type="text";document.getElementById("confirmPwd").type="text";$(this).attr("src",XSSGuard4URL(localInfo.eyeon))}else{document.getElementById("password").type="password";document.getElementById("confirmPwd").type="password";$(this).attr("src",XSSGuard4URL(localInfo.eyeoff))}});getCountryRegion();displayCountry();getAgreementContent(localInfo.currentCountryCode);if($("#adDefaultAgreeOrNot").text()=="true"){$("#adMarketChecked").prop("checked",true)}if($("#birthDate").length>0){showBirthDayDropBox()}changeInputCountryCode()});$(function(){var s=jQuery("#registerForm input[name='formBean.username']");var e=jQuery("#registerForm input[name='formBean.password']");var o=jQuery("#registerForm input[name='checkPassword']");var n=jQuery("#registerForm input[name='formBean.authCode']");var r=jQuery("#registerForm input[name='formBean.randomCode']");var a=$("#registerForm input[name='formBean.secphone']");var t=$("#secAuthCode");$.label.defaults.ifRight="10px";$.label(s,rss.uc_common_input_email_addr).label(e,rss.uc_common_input_ling_pwd).label(o,rss.please_enter_password_again).label(n,rss.register_email_auth_placeholder).label(r,rss.picture_verfication_code_null_error);s.change(function(){var e=$("#authCode");var o=$("#secPhoneAcct");var r=$("#secAuthCode");if($("#randomCode").val()!=undefined&&$("#randomCode").val().trim()!=""){chgRandomCodeForReset()}$("#randomCode").val("");e.removeAttr("disabled");turnBtnToEnabled($("#getValiCode"));e.removeClass("chkAuthCodeSuccess");e.val("");o.val("");r.val("");r.removeAttr("disabled");turnBtnToEnabled($("#getSecValiCode"));r.removeClass("chkAuthCodeSuccess");$("#emailAuthCodeRight").removeClass("poptips-yes");$("#secPhoneAuthCodeRight").removeClass("poptips-yes");hideErrorNew($("#errormsgemail-box"),$("#msg_email"));hideErrorNew($("#pwdDiv"),$("#msg_password"));hideErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"));hideErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"));hideRandomCodeError();$("#authCodeRight").removeClass("poptips-yes");hideErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"));hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"))});a.change(function(){var e=$("#secAuthCode");if(e.attr("disabled")&&e.attr("disabled")=="disabled"){e.removeAttr("disabled");turnBtnToEnabled($("#getSecValiCode"));e.removeClass("chkAuthCodeSuccess")}e.val("");$("#secPhoneAuthCodeRight").removeClass("poptips-yes");hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"))});a.keyup(function(){hideErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"));var e=$("#secAuthCode");if(!e.attr("disabled")||e.attr("disabled")!="disabled"){e.val("");hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"))}});t.keyup(function(){hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"))});t.blur(function(){var e=$("#registerForm input[name='formBean.secphone']").val();var o=$("#secAuthCode");if(o&&o.val().trim()==0){return}if(o.val().trim().length>=1&&o.val().trim().length!=6||!/^\d+$/.test(o.val().trim())){showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),rss.common_js_wrongcode);return}if(o&&o.val().trim().length==6){var o=$("#registerForm input[name='formBean.secphoneauthCode']").val();var r=$("#countryCode").val();if(r.indexOf("+")>-1){r=r.replace("+","00")}var s=getPhoneNumber(e,r);var n=2;if(e!=""){chkAuthCode(s,n,o,$("#secAuthCode"),$("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),$("#secPhoneAuthCodeRight"),$("#getSecValiCode"))}}});a.blur(function(){if($("#secPhoneAcct")!=undefined&&$("#secPhoneAcct").val()!=undefined&&$("#secPhoneAcct").val().trim()==""){return}var e=$("#countryCode").val();if(e.indexOf("+")>-1){e=e.replace("+","00")}if(!valiMobile(this.value,e)){showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss.error);return false}});if(localInfo.mustBindPhone=="true"){$.label(a,rss.uc_common_validator_phone_require)}else{$.label(a,rss.input_phone_optional)}$.label(t,rss.plaeseinputsmscode);var i=$("#btnSubmit");var d={$email:$("#username"),showErrorFn:function(e){showErrorNew($("#errormsgemail-box"),$("#msg_email"),e)},successFn:function(){hideErrorNew($("#errormsgemail-box"),$("#msg_email"))},reInputFn:function(){hideErrorNew($("#errormsgemail-box"),$("#msg_email"))}};emailValidator(d);e.blur(function(){$("#pwd_check_dialog").html("")});e.validator("bind",{type:["require","strLength","hasSpace","pwdComplexity","errorInput","pwdformat"],trim:false,validOnChange:true,min:8,max:32,msg_ct:"#msg_password",errorFunction:function(e,o){switch(o.type){case"require":showErrorNew($("#pwdDiv"),$("#msg_password"),rss.inputpwd);break;case"strLength":showErrorNew($("#pwdDiv"),$("#msg_password"),rss.reducePwd_format_2);break;case"hasSpace":showErrorNew($("#pwdDiv"),$("#msg_password"),rss.reducePwd_format_1);break;case"pwdComplexity":showErrorNew($("#pwdDiv"),$("#msg_password"),rss.reducePwd_format_3);break;case"errorInput":showErrorNew($("#pwdDiv"),$("#msg_password"),rss.reducePwd_inputError_desc);break;case"pwdformat":showErrorNew($("#pwdDiv"),$("#msg_password"),rss.common_js_pwd_account_same_reverse);break}},successFunction:function(){if(o.val()){validator(o,true)}},reInputFunction:function(){hideErrorNew($("#pwdDiv"),$("#msg_password"))}});o.validator("bind",{type:["require","eq"],trim:false,validOnChange:true,compareTo:e,msg_ct:"#msg_checkPassword",msg:{require:rss.js_confirmpwd,eq:rss.js_pwdnotsame},errorFunction:function(e,o){switch(o.type){case"require":showErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"),rss.js_confirmpwd);break;case"eq":showErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"),rss.js_pwdnotsame);break}},successFunction:function(){hideErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"))},reInputFunction:function(){hideErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"))}});n.validator("bind",{type:["require","length","int"],trim:true,validOnChange:true,max:6,min:6,msg_ct:"#msg_phoneRandomCode",msg:{"require":rss.inputsmscode,"int":rss.wrongformatsmscode,"default":rss.wrongformatsmscode},errorFunction:function(e,o){switch(o.type){case"require":showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss.inputsmscode);break;case"int":showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss.wrongformatsmscode);break;default:showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss.wrongformatsmscode);break}},successFunction:function(){},reInputFunction:function(){hideErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"))}});n.blur(function(){var e=n.val();if(e){e=e.trim()}else{return}if(e&&e.length==6){var o=s.val();var r=1;var e=n.val();chkAuthCode(o,r,e,n,$("#errRandomCode-box"),$("#msg_phoneRandomCode"),$("#emailAuthCodeRight"),$("#getValiCode"))}});s.focus();i.bind("click",function(){localInfo.isReadyToSubmit=true;if(!checkInputLegality()){return}registerAgreement(submitFun)});e.bind("keyup",function(){onPwdKeyUp4EMUI(e[0],$("#msg_password"),$("#pwdDiv"),"error-tips-EMUI5","input-error-EMUI5",true)});if(localInfo.displayCaptchaType!="1"){r.validator("bind",{type:["require","length"],trim:true,min:4,max:4,validOnChange:false,reInputEvent:"keyup",errorClassEMUI5:"input-error-EMUI5",errorBorder:$("#randomCodeDiv"),errorFunction:function(e,o){switch(o.type){case"require":showRandomCodeError(rss.picture_verfication_code_null_error);break;case"length":showRandomCodeError(rss.login_js_codeerror);break}},successFunction:function(e,o){},reInputFunction:function(){hideRandomCodeError();$("#authCodeRight").removeClass("poptips-yes")}});$("#randomCode").bind("keyup",function(e){validateInput();checkImgAuthCode()});if($("#randomCode").val().length>0){chgRandomCodeForReset()}validateInput()}registerPwdformatValidator($("#username"))});function getCountryRegion(){var e={"lang":localInfo.lang,"reqClientType":localInfo.reqClientType};if(localInfo.thirdLoginFlag=="true"||localInfo.isQuickReg=="true"){e.thirdLoginFlag="true"}var o="getCountryRegion";ajaxHandler(o,e,function(e){if(e.isSuccess=="1"){countryRegions=e.countryRegions;showCountryRegions=listToDropListCountry(countryRegions)}},function(){},false,"JSON");var r="";r=localInfo.currentCountrySiteID+"-"+localInfo.currentCountryCode;$("#selectCountryImg").DropListEMUI5({items:showCountryRegions,defaultValue:r,onChange:function(e,o){var r=e.split("-");localInfo.currentCountrySiteID=r[0];localInfo.currentCountryCode=r[1];var s=r[0]!="7";if(r[0]!=localInfo.currentSiteID&&!warningConfirmed){isCurrentSite=false}$("#selectedCountry").text(o);$("#regXCountry").text(rss.now_register_x_account.format(o));var n=e.split("-")[1];$("#selectCountryCodeDiv").html("");getAgreementContent(n);afterSelectCountry(n);$("#countryRegion").val(e);displayAgreeTwoByCD(n)}})}function displayCountry(){var r=localInfo.currentCountryCode;var s=getIPCountry();var n=getdefaultCountryByCurrentSiteID();var a=n.split("-")[1];var t="";if(countryRegions.length>0){var i=false;if(r){$.each(countryRegions,function(e,o){if(r.toLowerCase()==o.regionID){$("#selectedCountry").text(o.mulitLangRegion);$("#regXCountry").text(rss.now_register_x_account.format(o.mulitLangRegion));i=true;t=o.siteID+"-"+o.regionID;replaceAgreeAge(o.ageLimit);return false}})}if(s&&!i){$.each(countryRegions,function(e,o){if(s.toLowerCase()==o.regionID){$("#selectedCountry").text(o.mulitLangRegion);$("#regXCountry").text(rss.now_register_x_account.format(o.mulitLangRegion));i=true;t=localInfo.currentSiteID+"-"+o.regionID;replaceAgreeAge(o.ageLimit);return false}})}if(a&&!i){$.each(countryRegions,function(e,o){if(a.toLowerCase()==o.regionID){$("#selectedCountry").text(o.mulitLangRegion);$("#regXCountry").text(rss.now_register_x_account.format(o.mulitLangRegion));i=true;t=n;replaceAgreeAge(o.ageLimit);return false}})}}$("#countryRegion").val(t);if(countryRegions.length>=1){$("#chooseCountry").css("display","");$("#chooseCountryShadow").css("display","")}}function notCurrentSiteWarningDialog(){var e='<div style="line-height:1.5">'+rss.notCurrentSiteWarning+"</div>";$("<div/>").Dialog({title:rss_new.uc_common_hint,btnLeft:false,btnRight:{text:rss.iKnowBtn,fn:function(){warningConfirmed=true;if(!checkInputLegality()){return}registerAgreement(submitFun);this.hide()}},html:e,dialogStyle:localInfo.msgDialogStyle,beforeAction:function(){}}).Dialog("show")}function sendEmailCode(e){var s=$("#getValiCode");if($("#randomCode").length>0&&!validator($("#randomCode"),true)){return false}var o={70001101:rss_new.uc_error_10000001,70001201:rss_new.uc_error_10000001,10000002:rss_new.uc_error_10000001,70001102:rss_new.uc_error_70001102_0,70001104:rss_new.uc_error_70001104_0,"default":rss_new.uc_error_10000001};var r=14;var n=$("#countryRegion").val();var a;if(n){a=n.split("-")[1]}var t={email:e,accountType:"1",emailReqType:"3",languageCode:localInfo.lang,siteID:localInfo.currentCountrySiteID,reqClientType:localInfo.reqClientType,countryCode:a,operType:r,session_code_key:localInfo.session_code_key,randomCodeDisplayType:localInfo.randomCodeDisplayType};if(localInfo.displayCaptchaType=="1"){t.randomCode=ramdonCodeImgObj.getRandomCode()}else{t.randomCode=$("#randomCode").val()}var i;if(rss.msgDialogOverlayClass){i={overlayClass:rss.msgDialogOverlayClass}}s.attr("disabled",true);casAjaxObj.getEMailAuthCode(t,d,l,o);function d(){var e=parseInt($("#msg_phoneRandomCode").width());var o="-"+(e*.5-120+286*.5)+"px";hideErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"));showMsgSuccess({obj:$("#msg_getPhoneRandomCode"),msg:rss.emailHasSendTo.format(t.email),leftPix:o,rightPix:"-255px",bottom:"63px"});$("#authCode").removeClass("chkAuthCodeSuccess");$("#authCode").val("");$("#authCode").removeAttr("disabled");$("#emailAuthCodeRight").removeClass("poptips-yes");s.attr("IntervalTime",60);s.attr("disabled",true);s.addClass("auth_code_grey");jsInnerTimeout($("#getValiCode"),rss.resend,true,true)}function l(e,o){s.removeAttr("disabled",true);var r=o.errorCode;if("10000201"==r){if(localInfo.displayCaptchaType=="1"&&captchaObj){showCaptchaError();ramdonCodeImgObj.resetRandomCode()}else{showRandomCodeError(e);chgRandomCodeForReset()}}else{showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),e)}}}function turnBtnToEnabled(e){e.attr("disabled",false);var o=e.attr("IntervalTime");if(o<=0){e.removeClass("auth_code_grey")}}function checkImgAuthCode(){var o=$("#randomCode");var r=$("#randomCodeImg");var e=$("#randomCode_msg");if(typeof o[0]!="undefined"&&o.val().length>=4){var s=o.val();var n={randomCode:s,session_code_key:"p_reg_login_websso_session_ramdom_code_key",randomCodeDisplayType:localInfo.randomCodeDisplayType};ajaxHandler("authCodeValidate",n,function(e){if("1"==e.isSuccess){$("#authCodeRight").addClass("poptips-yes");hideRandomCodeError();validateInput()}else{chgRandomCode(r[0],localInfo.webssoLoginSessionCode);o[0].value="";$("#authCodeRight").removeClass("poptips-yes");validateInput();switch(e.errorCode){case"10000201":{showRandomCodeError(rss.common_js_wrongcode);break}case"10000001":{showRandomCodeError(rss.error_10000001);break}case"10000004":{showRandomCodeError(rss.error_10000004);break}default:{showRandomCodeError(rss.error_10000002);break}}}},function(e){},true,"JSON")}else if(typeof o[0]!="undefined"&&o.val().length!=4){}}function showRandomCodeError(e){$("#randomCode_msg").html(e);$("#randomCode_msg").addClass("error-tips-EMUI5");$("#randomCodeDiv").addClass("input-error-EMUI5")}function hideRandomCodeError(){$("#randomCode_msg").html("");$("#randomCode_msg").removeClass("error-tips-EMUI5");$("#randomCodeDiv").removeClass("input-error-EMUI5")}function checkSecPhone(){var e=$("#registerForm input[name='formBean.secphone']").val().trim();var o=$("#registerForm input[name='formBean.secphoneauthCode']").val().trim();var r=$("#countryCode").val();if(r.indexOf("+")>-1){r=r.replace("+","00")}var s=getPhoneNumber(e,r);if(localInfo.mustBindPhone=="true"){if(s.length<1||o.length<1){return false}}else{if(s.length>1&&o.length<1){return false}}return true}function checkInputLegality(){if($("#secPhoneAcct")!=undefined&&$("#secPhoneAcct").val()!=undefined&&$("#secPhoneAcct").val().trim()==""){hideErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"));hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"))}if($("#btnSubmit").attr("class").indexOf("sel")==-1||$("#btnSubmit").hasClass("send-ajax")){return false}var e=false;$(".error-tips-EMUI5").each(function(){if($(this).text().trim().length>1){e=true}});if(e){return false}var o=$("#registerForm");if(!validator(o,true)){return false}if(localInfo.isRegNeedInputAge=="true"){if(!checkBirthday(false)){return false}}var r=$("#registerForm input[name='formBean.secphone']").val();var s=$("#registerForm input[name='formBean.secphoneauthCode']").val();var n=$("#countryCode").val();if(n.indexOf("+")>-1){n=n.replace("+","00")}if(localInfo.mustBindPhone=="true"){if(r==""){showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss.emptyphone);return false}if(!valiMobile(r,n)){showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss.error);return false}if(s==""){showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),rss.inputsmsAuthCode);return false}if(!$("#authCode").hasClass("chkAuthCodeSuccess")||!$("#secAuthCode").hasClass("chkAuthCodeSuccess")){return false}}else{if(r){if(!valiMobile(r,n)){showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss.error);return false}if(s==""){showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),rss.inputsmsAuthCode);return false}if(!$("#authCode").hasClass("chkAuthCodeSuccess")||!$("#secAuthCode").hasClass("chkAuthCodeSuccess")){return false}}}if(localInfo.currentCountrySiteID!=localInfo.currentSiteID&&!warningConfirmed){notCurrentSiteWarningDialog();return}return true}function submitFun(e){checkExistAuto($("#username"),function(){postAction(e)})}function getbirthDate(){if(localInfo.isRegNeedInputAge=="false"){return""}var e=$("#birthDate").datePickEMUI5("Y").toString();var o=$("#birthDate").datePickEMUI5("M").toString();var r=$("#birthDate").datePickEMUI5("D").toString();if(o.length==1){o="0"+o}if(r.length==1){r="0"+r}var s=e+o+r;return s}function postAction(s){var n=jQuery("#registerForm input[name='formBean.username']");var a=jQuery("#registerForm input[name='formBean.password']");var e=jQuery("#registerForm input[name='formBean.randomCode']");var o=jQuery("#registerForm input[name='formBean.authCode']");var r=$("#countryRegion").val();var t="";var i="";if(r.split("-").length>1){t=r.split("-")[1];i=r}var d=a.val();var l=localInfo.agreementContentsStr;if(localInfo.isSupportAdMarketAgr&&$("#adMarketChecked").is(":checked")==false){l=checkAdMarketAgreedAgrContent(l)}l=l.replace(/\$countryCode/g,i);l=l.replace(/\'/g,'"');var c="registerCloudAccount";var u={"userAccount":n.val(),"password":d,"accountType":1,"authCode":o.val().trim(),"reqClientType":localInfo.reqClientType,"registerChannel":localInfo.loginChannel,"languageCode":localInfo.lang,"countryCode":t,"agrVers":l,"thirdLoginFlag":localInfo.thirdLoginFlag==""?false:localInfo.thirdLoginFlag,"birthDate":getbirthDate(),session_code_key:localInfo.session_code_key,randomCodeDisplayType:localInfo.randomCodeDisplayType};if(localInfo.displayCaptchaType=="1"){u.randomCode=ramdonCodeImgObj.getRandomCode()}else{u.randomCode=$("#randomCode").val()}var t=$("#countryCode").val();if(t.indexOf("+")>-1){t=t.replace("+","00")}var m=$("#secPhoneAcct").val();if(m){u.secAccountType=6;u.secAccount=getPhoneNumber(m,t);u.secVerifyCode=$("#secAuthCode").val()}u.operType=0;u.randomAuthCode=$("#randomCode").val();var h;if(rss.msgDialogOverlayClass){h={overlayClass:rss.msgDialogOverlayClass}}$("#btnSubmit").addClass("send-ajax");ajaxHandler(c,u,function(e){var o=e.isSuccess;if(o=="1"){$("#btnSubmit").addClass("send-ajax");$("#register_msg").show().html("");var r={userAccount:n.val(),password:a.val(),reqClientType:localInfo.reqClientType,loginChannel:localInfo.loginChannel,authcode:e.regToken,service:htmldecode(localInfo.service),loginUrl:localInfo.loginUrl,opType:13};ajaxHandler("remoteLogin",r,function(e){$("#btnSubmit").addClass("send-ajax");if("1"==e.isSuccess){gotoUrl(e.callbackURL)}else{$("#btnSubmit").removeClass("send-ajax");showErrorReg(e.errorCode,s)}},function(e){},false,"JSON")}else{showErrorReg(e.errorCode,s)}},function(){},true,"json",h)}function showErrorReg(e,o){chgRandomCodeForReset();turnBtnToEnabled($("#getSecValiCode"));turnBtnToEnabled($("#getValiCode"));$("#authCode").removeClass("chkAuthCodeSuccess");$("#authCode").val("");$("#authCode").removeAttr("disabled");$("#secAuthCode").removeAttr("disabled");$("#secAuthCode").removeClass("chkAuthCodeSuccess");$("#secAuthCode").val("");$("#emailAuthCodeRight").removeClass("poptips-yes");$("#secPhoneAuthCodeRight").removeClass("poptips-yes");if(e=="70001201"){showPopError(rss.error_70001201_2);$("#randomCode").val("");$("#randomCode").focus()}else if(e=="10000704"){showPopError(rss.error_70001201_1);$("#randomCode").val("");$("#randomCode").focus();$("#authCode").val("");$("#authCodeRight").removeClass("poptips-yes");chgRandomCode($("#randomCodeImg")[0],localInfo.webssoLoginSessionCode)}else if(e=="70008800"){showPopError(rss.error_risk_70008800);$("#randomCode").val("");$("#msg_randomCode").show().html("");$("#authCodeRight").removeClass("poptips-yes");chgRandomCode($("#randomCodeImg")[0],localInfo.webssoLoginSessionCode)}else if(e=="10000001"||e=="70001101"){showPopError(rss.error_10000001);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="10002073"){window.setTimeout(function(){showErrorNew($("#pwdDiv"),$("#msg_password"),rss.error_10002073)},100);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="10000201"){if(localInfo.displayCaptchaType=="1"&&captchaObj){showCaptchaError();ramdonCodeImgObj.resetRandomCode()}else{$("#randomCode").val("");showRandomCodeError(rss.common_js_wrongcode);$("#authCodeRight").removeClass("poptips-yes");chgRandomCode($("#randomCodeImg")[0],localInfo.webssoLoginSessionCode)}}else if(e=="70008001"){window.setTimeout(function(){showErrorNew($("#pwdDiv"),$("#msg_password"),rss.error_70008001)},100);$("#randomCode").val("");$("#randomCode").focus()}else if(e=="70002070"){window.setTimeout(function(){showErrorNew($("#pwdDiv"),$("#msg_password"),rss.error_70002070)},100);$("#randomCode").val("");$("#randomCode").focus()}else if(e=="70001401"){showPopError(rss.error_70001401);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="10001013"){window.setTimeout(function(){showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),rss.forgetbyphone_wrongsmscode)},100);turnBtnToEnabled($("#getSecValiCode"));$("#secAuthCode").attr("disabled",false);$("#secAuthCode").removeClass("chkAuthCodeSuccess")}else if(e=="70002002"){window.setTimeout(function(){showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss.error_70002002)},100);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="70007007"){showPopError(rss.error_70007007);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="70002003"){showPopError(rss.error_70002003);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="70006006"){showPopError(rss.error_70006606);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="70007003"){showPopError(rss.error_70007003);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="70007004"){showPopError(rss.error_70007004);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="70007001"){showPopError(rss.error_70007001);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="70002067"){showPopError(rss.error_70002067);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="70002033"){showPopError(rss.error_70002033);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="70002018"){showPopError(rss.error_70002018);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="70002057"){window.setTimeout(function(){showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss.error_70002057)},100)}else if(e=="70002058"){showPopError(rss.error_70002058);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="70002039"){window.setTimeout(function(){showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss.error_70002039)},100)}else if(e=="10000004"){showPopError(rss.rss.error_10000004);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="10000002"){showPopError(rss.error_10000002);$("#randomCode").val("");$("#msg_randomCode").show().html("")}else if(e=="70006007"){showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss.error_70006007_1)}else{showPopError(rss.js_emailregfail);$("#randomCode").val("");$("#msg_randomCode").show().html("")}o.hide()}function checkExistAuto(e,r){var o=e.val();if(o.length>50||o.length<5){showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss_new.login_js_accountlength);return}var s={"userAccount":o,"accountType":1};casAjaxObj.isExsitUser(s,n,a);function n(e){var o=e.existAccountFlag;if(o=="0"){hideErrorNew($("#errormsgemail-box"),$("#msg_email"));if(r){r()}}else if(o=="1"){showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss.js_existemail)}else{hideErrorNew($("#errormsgemail-box"),$("#msg_email"))}}function a(e,o){if(o&&o.errorCode=="10000004"){}else{showErrorNew($("#errormsgemail-box"),$("#msg_email"),e)}}}$(document).keyup(function(e){switch(e.which){case 13:$("#btnSubmit").click();break;default:return}});function changeInputCountryCode(){var i=[];var d="";d=localInfo.currentCountryCode;var e=localInfo.countryCodes.split(",");if(e){$.each(e,function(e,o){var r=o.split("(");var s=r[0];var n=o.split("|")[0];var a=o.split("|")[1];s=s.replace("+","00");if(a==d){localInfo.default_country_code=s;if(d=="ru"){localInfo.country_code_ru_text=n}else if(d=="kz"){localInfo.country_code_kz_text=n}}if(s){var t={value:s,label:n};i.push(t)}})}$("#countryCode").val(localInfo.default_country_code);$("#input_languageCode").DropListEMUI5({items:i,defaultValue:localInfo.default_country_code,onChange:function(e,o){hideErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"));var r=o.split("(");if(r.length>1){$("#countryCode").val(r[0]);var s=$("#secPhoneAcct").val();if(s!=""){if(!valiMobile(s)){showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss.error);return}}}}});if(localInfo.default_country_code=="007"){if(localInfo.currentCountryCode=="kz"){$("#input_languageCode .select-text").html(localInfo.country_code_kz_text)}else{$("#input_languageCode .select-text").html(localInfo.country_code_ru_text)}}}function changeSecPhoneCode(e){var o=$("#registerForm input[name='formBean.secphone']");$.label(o,"");if(e=="true"){$.label(o,rss.uc_common_validator_phone_require)}else{$.label(o,rss.input_phone_optional)}}function afterSelectCountry(e){var o={lang:localInfo.lang,countryCode:e};ajaxHandler("isCountrySupportPhone",o,function(e){if("1"==e.isSuccess){localInfo.mustBindPhone=e.mustBind;$("#secPhoneRandomCode-box").css("display","inherit");$("#bindSecPhone-box").css("display","inherit");changeSecPhoneCode(e.mustBind);changeInputCountryCode()}else{}},function(e){},true,"JSON")}function getSecPhoneCode(e,o){var r=$("#username").val();if(!r||r.trim()==""){showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss.uc_common_input_email_addr);return}if(localInfo.displayCaptchaType=="1"){if(!ramdonCodeImgObj.isValidateRandomCodeSuccess()){showCaptchaError();ramdonCodeImgObj.resetRandomCode();return}}else{var s=$("#randomCode").val();if(!s||s.trim()==""){showErrorNew($("#randomCodeDiv"),$("#randomCode_msg"),rss.picture_verfication_code_null_error);return}}var n=$("#authCode").val();if(!n||n.trim()==""){showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss.register_email_auth_placeholder);return}var a=$("#secPhoneAcct").val();if(!a||a.trim()==""){showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss.uc_common_validator_phone_require);return}if(!valiMobile(a)){showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss.error);return}var t=$("#countryCode").val();if(t.indexOf("+")>-1){t=t.replace("+","00")}$("#msg_sec_phone").html("");$("#register_msg").html("");sendSecPhoneSMS(getPhoneNumber(a,t),e,o)}function chkAuthCode(e,o,r,s,n,a,t,i){var d={accountType:o,userAccount:e,authCode:r,authOprType:"3",siteID:localInfo.currentCountrySiteID,reqClientType:localInfo.reqClientType,operType:11};var l={10000001:rss_new.common_wrong_authcode,70001201:rss_new.uc_error_10000001,10000201:rss_new.common_wrong_authcode,"default":rss_new.common_wrong_authcode};localInfo.isReadyToSubmit=false;casAjaxObj.chkAuthCode(d,c,u,l);function c(){s.attr("disabled",true);s.addClass("chkAuthCodeSuccess");t.addClass("poptips-yes");i.attr("disabled",true);i.addClass("auth_code_grey");if(localInfo.isReadyToSubmit){$("#btnSubmit").click()}}function u(e){$("#next").removeClass("send-ajax");$("#inputAuthCode").addClass("input-error-EMUI5");$("#msg_error_chkemail").addClass("addbtmpad-msg-top2p");t.removeClass("poptips-yes");showErrorNew(n,a,e)}}function showCaptchaError(){captchaObj.onSuccess(function(){$("#randomCodeDiv").css("margin-bottom","0")});$("#randomCode_msg").addClass("error-tips-EMUI5");$("#randomCodeDiv").removeClass("input-error-EMUI5").css("margin-bottom","24px");$("#picAuthCode").removeClass("input-error-EMUI5");$("#input-error-EMUI5").removeClass("input-error-EMUI5");ramdonCodeImgObj.validateRandomCodeError()}function sendSecPhoneSMS(e,o,r,s){var n=$("#getSecValiCode");var a={10000002:rss_new.uc_error_10000001,70001201:rss_new.uc_error_10000001,10001011:rss_new.reg_input_email_authcode,70001102:rss_new.uc_error_70001102_1,70001104:rss_new.uc_error_70001104_1,"default":rss_new.resetpwd_get_authcode_error};var t=17;var i={"userAccount":e,"smsReqType":"3","reqClientType":o,"accountType":2,"siteID":localInfo.currentCountrySiteID,"languageCode":localInfo.lang,operType:t,session_code_key:localInfo.session_code_key,randomCodeDisplayType:localInfo.randomCodeDisplayType};if(localInfo.displayCaptchaType=="1"){i.randomCode=ramdonCodeImgObj.getRandomCode()}else{i.randomCode=$("#randomCode").val()}var d;if(rss.msgDialogOverlayClass){d={overlayClass:rss.msgDialogOverlayClass}}n.attr("disabled",true);casAjaxObj.getSMSAuthCode(i,l,c,a);function l(){var e=parseInt($("#msg_secphoneRandomCode").width());var o=(e-280)*.5+"px";hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"));showMsgSuccess({obj:$("#msg_secphoneRandomCode"),msg:rss.smsHasSendTo.format(getExpressPhone(i.userAccount)),leftPix:o,rightPix:"150px",bottom:"37px"});$("#secAuthCode").removeAttr("disabled");$("#secAuthCode").removeClass("chkAuthCodeSuccess");$("#secAuthCode").val("");$("#secPhoneAuthCodeRight").removeClass("poptips-yes");n.attr("IntervalTime",60);n.attr("disabled",true);n.addClass("auth_code_grey");jsInnerTimeout($("#getSecValiCode"),rss.resend,true,true)}function c(e,o){n.removeAttr("disabled",true);var r=o.errorCode;if("10000201"==r){if(localInfo.displayCaptchaType=="1"&&captchaObj){showCaptchaError();ramdonCodeImgObj.resetRandomCode()}else{showRandomCodeError(e);chgRandomCodeForReset()}}else if("10001012"==r){secPhoneAuthCodeOverLimit()}else if("70009032"==r){showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),e)}else if("10001011"==r){showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),e)}else{showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),e)}}}var secPhoneAuthCodeOverLimit=function(){var e="<div>"+rss.reg_sec_authcode_over_limit+"</div>";e+="<div id='crossSite_errDiv' style='margin-top:10px;font-size:12px;color:#ff3320'></div>";$("<div></div>").DialogSimple({text:e,btnText:rss.IGetIt,dialogStyle:localInfo.msgDialogStyle,btnFn:function(){location.reload()},btnLeftText:"",btnLeftFn:function(){},html:e}).show()};